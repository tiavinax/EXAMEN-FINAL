Ã‰tape 1 : Base de donnÃ©es
CrÃ©er la table parametre

InsÃ©rer le paramÃ¨tre frais_achat avec valeur par dÃ©faut (ex: 10)

Ã‰tape 2 : ModÃ¨les
CrÃ©er ParametreModel.php (get, update)

Mettre Ã  jour BesoinModel.php pour rÃ©cupÃ©rer besoins restants

Mettre Ã  jour DonModel.php pour rÃ©cupÃ©rer dons argent disponibles

CrÃ©er AchatModel.php pour gÃ©rer les achats

Ã‰tape 3 : Interface besoins restants
CrÃ©er page besoins/restants.php

Afficher liste des besoins non satisfaits avec bouton "Acheter"

Pour chaque besoin, afficher : ville, libellÃ©, quantitÃ© restante, prix unitaire, total (quantitÃ© Ã— prix)

Ã‰tape 4 : Modal d'achat
CrÃ©er modal avec :

Liste des dons argent disponibles

Champ pour saisir quantitÃ© Ã  acheter

Affichage du calcul : prix total, frais, total avec frais

Bouton "Simuler" et "Valider"

Ã‰tape 5 : Simulation (sans sauvegarde)
Endpoint AJAX /achats/simuler

Calculer :

Montant besoin = quantitÃ© Ã— prix_unitaire

Frais = montant besoin Ã— (frais/100)

Total Ã  dÃ©duire = montant besoin + frais

VÃ©rifier si don sÃ©lectionnÃ© a assez de solde

Retourner rÃ©sultat au format JSON

Ã‰tape 6 : Validation (avec sauvegarde)
Endpoint /achats/valider

CrÃ©er enregistrement dans table achats

CrÃ©er attribution correspondante

Mettre Ã  jour solde du don (si on suit traÃ§abilitÃ©)

Rediriger avec message de succÃ¨s/erreur

Ã‰tape 7 : Page rÃ©capitulative avec Ajax
CrÃ©er page recapitulatif/index.php

Endpoint AJAX /api/recapitulatif

Total besoins (quantitÃ© Ã— prix)

Total satisfait (somme des attributions en valeur)

Total restant

Bouton "Actualiser" avec fetch AJAX

Afficher les chiffres avec mise en forme (cartes)

âœ… TODO FRONT-END - VERSION 2
Ã‰tape 1 : Page des besoins restants
CrÃ©er fichier app/views/besoins/restants.php

IntÃ©grer le header/footer

Titre : "Besoins restants Ã  satisfaire"

Design d'un tableau avec :

Colonnes : Ville | Besoin | Type | QuantitÃ© restante | Prix unitaire | Total (Ar) | Action

Ligne par besoin avec reste > 0

Bouton "Acheter" dans colonne Action

Ã‰tape 2 : Modal d'achat (structure HTML)
CrÃ©er un modal Bootstrap cachÃ©

ID du modal : modalAchat

Contenu du modal :

Titre : "Achat via don en argent"

Info besoin (ville, libellÃ©, quantitÃ© restante)

Selecteur : "Choisir un don" (liste des dons argent disponibles)

Champ : "QuantitÃ© Ã  acheter" (input number)

Affichage prix unitaire

Affichage frais (x%)

Affichage total Ã  payer

2 boutons : "Simuler" et "Valider l'achat"

Ã‰tape 3 : Remplir le modal dynamiquement
Au clic sur "Acheter" :

RÃ©cupÃ©rer les donnÃ©es du besoin (data-* attributes)

Mettre Ã  jour le modal avec ces infos

Afficher le prix unitaire et le calcul initial

Ouvrir le modal

Ã‰tape 4 : Simulation (AJAX)
Au clic sur "Simuler" :

RÃ©cupÃ©rer : besoin_id, don_id, quantite

Envoyer Ã  /achats/simuler en fetch POST

Afficher le rÃ©sultat dans le modal :

Montant sans frais

Frais

Total avec frais

Message si solde insuffisant

Ã‰tape 5 : Validation (AJAX ou formulaire)
Au clic sur "Valider" :

Envoyer Ã  /achats/valider

Afficher message succÃ¨s/erreur

Fermer modal si succÃ¨s

RafraÃ®chir la page ou mettre Ã  jour le tableau

Ã‰tape 6 : Page rÃ©capitulative
CrÃ©er fichier app/views/recapitulatif/index.php

3 grandes cartes :

Carte 1 : "Besoins totaux" (montant)

Carte 2 : "DÃ©jÃ  satisfaits" (montant)

Carte 3 : "Restants Ã  financer" (montant)

Bouton "Actualiser" avec icÃ´ne refresh

Ã‰tape 7 : Actualisation AJAX
CrÃ©er endpoint /api/recapitulatif (retour JSON)

Au clic sur Actualiser :

Fetch GET vers l'endpoint

Mettre Ã  jour les 3 cartes sans recharger la page

Ajouter effet de chargement (spinner)

ğŸ“ Structure des vues Ã  crÃ©er
text
app/views/
â”œâ”€â”€ besoins/
â”‚   â””â”€â”€ restants.php          (Nouveau)
â”œâ”€â”€ recapitulatif/
â”‚   â””â”€â”€ index.php              (Nouveau)
â””â”€â”€ (les dossiers existants)
ğŸ¨ Maquette simple pour la page besoins restants
text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Besoins restants Ã  satisfaire                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ville  â”‚ Besoin â”‚ Type â”‚ Reste â”‚ P.U  â”‚ Total â”‚     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ Tana   â”‚ Riz    â”‚ Nat  â”‚ 700kg â”‚ 2500 â”‚ 1.75M â”‚ ğŸ”˜  â”‚
â”‚ Tana   â”‚ Huile  â”‚ Nat  â”‚ 350L  â”‚ 3000 â”‚ 1.05M â”‚ ğŸ”˜  â”‚
â”‚ Tama   â”‚ Riz    â”‚ Nat  â”‚ 600kg â”‚ 2500 â”‚ 1.5M  â”‚ ğŸ”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
                          ğŸ”˜ = Bouton Acheter
ğŸ¨ Maquette simple pour la page rÃ©capitulative
text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RÃ©capitulatif financier                    ğŸ”„      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   TOTAL     â”‚  â”‚  SATISFAIT  â”‚  â”‚   RESTANT   â”‚ â”‚
â”‚  â”‚ 5 000 000 Arâ”‚  â”‚ 2 500 000 Arâ”‚  â”‚ 2 500 000 Arâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“ Ã€ faire ensemble
#	TÃ¢che	Statut
1	CrÃ©er besoins/restants.php	â³
2	Ajouter tableau des besoins restants	â³
3	Ajouter boutons "Acheter"	â³
4	CrÃ©er modal d'achat	â³
5	Dynamiser modal avec JS	â³
6	CrÃ©er page rÃ©capitulative	â³
7	Ajouter bouton actualiser AJAX	â³
On commence par la page besoins restants ? Je te donne le code complet de la vue et on avance !